<!DOCTYPE html>
<html>
<head>

	<title>Colour analysis</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="index.css"/>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Indie+Flower|Roboto" rel="stylesheet">
	<script src="jscolor.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<noscript><meta http-equiv="refresh" content="0; url=https://www.whatismybrowser.com/guides/how-to-enable-javascript/auto"></noscript>
</head>
<body>
	<!-- Hello, adventurer! -->
	<section id="main">
		<p id="disclaimer">Submissions are ordered chronologically.</p>
	</section>
	<style>
		#disclaimer{
			font-size: 16px;
		}
		body {
			font-family: "Roboto";
			font-size: 50px;
			padding: 0;
			margin: 16px;
		}
		span.digits {
			background-color: white;
			margin: 10px;
			padding: 0 8px;
			border: 1px solid black;
		}
		.submission {
			margin-bottom: 10px;
		}
	</style>
	<script>
		function addSet(colours, label) {
			var submission = document.createElement("div");
			submission.classList.add("submission");

			for (var i = 0; i < 10; i++) {
				var e = document.createElement("span");
				e.classList.add("digits");
				e.innerHTML = i;
				e.style.backgroundColor = '#' + colours[int_to_eng[i]];
				submission.appendChild(e);
			}

			var lbl = document.createElement("span");
			lbl.classList.add("labels");
			lbl.innerHTML = label;
			submission.appendChild(lbl);

			$('#main')[0].appendChild(submission);
		}



		var eng_to_int = {"one": 1, "two": 2, "three": 3, "four": 4, "five": 5, "six": 6, "seven":7, "eight": 8, "nine": 9, "zero": 0};
		var int_to_eng = ["zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"]

		data = [
			["Jess", {"one": "F0C800","two": "94D400","three": "C20061","four": "804726","five": "F70000","six": "00F0C8","seven": "124F00","eight": "0045AD","nine": "8B00A1","zero": "E0E0E0"}],
			["Masa 1", {"one": "004E8D","two": "7FC900","three": "F6EE00","four": "D91600","five": "BA0097","six": "70009B","seven": "00EEFF","eight": "002BAF","nine": "0098AC","zero": "00F1F1"}],
			["Nina", {"one": "AFA500","two": "006934","three": "23009E","four": "A30016","five": "008AB2","six": "523F00","seven": "8F007F","eight": "FF2626","nine": "00DACE","zero": "726F00"}],
			["Ita", {"one": "C21300","two": "007F15","three": "020005","four": "9026B1","five": "E7D927","six": "503800","seven": "001E52","eight": "45DCD3","nine": "690000","zero": "EEB957"}],
			["Unknown", {"one": "FFFFFF","two": "FCFA00","three": "E600E3","four": "30C600","five": "008AE6","six": "D70043","seven": "48040D","eight": "5F0088","nine": "B48400","zero": "D5D5D5"}],
			["Novoselec", {"one": "000000","two": "D4DB00","three": "004FD9","four": "DE6000","five": "0000D1","six": "7600BA","seven": "D42300","eight": "077000","nine": "C900C3","zero": "FFFFFF"}],
			["Domen", {"one": "000000","two": "00095C","three": "4B7000","four": "FA0000","five": "F5ED00","six": "06A600","seven": "E37900","eight": "00591E","nine": "0000D6","zero": "00F0D8"}],
			["Sajovic", {"one": "26BD00","two": "D98200","three": "FCEB79","four": "FFE2D6","five": "F74A00","six": "EB3D88","seven": "A2FF00","eight": "0000FF","nine": "6600FF","zero": "FFFFFF"}],
			["Masa 2", {"one": "0013AB","two": "5BFF00","three": "FFF900","four": "E03C00","five": "FFB9F3","six": "7C31D5","seven": "76CFDA","eight": "002F9B","nine": "5764EB","zero": "DDFCFA"}]
		];

		/* generate submissions */
		for (var i = 0; i < data.length; i++) {
			addSet(data[i][1], data[i][0]);
		}

		$('#main')[0].appendChild(document.createElement("br"));

		/* calculate averages */
		var avg = {};
		for (var i = 0; i < 10; i++) {
			var sumR = 0;
			var sumG = 0;
			var sumB = 0;
			for (var j = 0; j < data.length; j++) {
				sumR += parseInt(data[j][1][int_to_eng[i]].substring(0,3), 16);
				sumG += parseInt(data[j][1][int_to_eng[i]].substring(3,5), 16);
				sumB += parseInt(data[j][1][int_to_eng[i]].substring(5), 16);
			}
			avgR = Math.round(sumR / data.length);
			avgB = Math.round(sumB / data.length);
			avgG = Math.round(sumG / data.length);
			avg[int_to_eng[i]] = (avgR.toString(16) + avgG.toString(16) + avgB.toString(16)).toUpperCase();
			console.log(avg[int_to_eng[i]]);
		}
		addSet(avg, "Average");

		$('#main')[0].appendChild(document.createElement("br"));

		/* generate deviations */
		for (var i = 0; i < data.length; i++) {
			var deviations = {}
			for (var j = 0; j < 10; j++) {

				//deviations[int_to_eng(j)] = average[] - data[i][1]
			}
			addSet(deviations, "Deviation of " + data[i][0]);
		}
	</script>
</body>
</html>
